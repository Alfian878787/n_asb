From 48091948053ff651a05379f5dfbba07c3ca61286 Mon Sep 17 00:00:00 2001
From: Moritz Horstmann <dev@peterzweg.at>
Date: Sat, 07 Apr 2018 23:02:24 +0200
Subject: [PATCH] Revert "libmediaplayerservice: fix deadlock on gapless start failure"

This reverts commit 04925a404e3fa2a0505c5e29187f6f0b2563bc34

Change-Id: Ibcd85d1a442ee7780310ce3b415676e628569931
---

diff --git a/media/libmediaplayerservice/MediaPlayerService.cpp b/media/libmediaplayerservice/MediaPlayerService.cpp
index 33eea28..b0eff1c 100644
--- a/media/libmediaplayerservice/MediaPlayerService.cpp
+++ b/media/libmediaplayerservice/MediaPlayerService.cpp
@@ -1349,17 +1349,10 @@
         if (msg == MEDIA_PLAYBACK_COMPLETE && client->mNextClient != NULL) {
             if (client->mAudioOutput != NULL)
                 client->mAudioOutput->switchToNextOutput();
-
-            ALOGD("gapless:current track played back");
-            ALOGD("gapless:try to do a gapless switch to next track");
-
-            if (client->mNextClient->start() == NO_ERROR &&
-                client->mNextClient->mClient != NULL) {
+            client->mNextClient->start();
+            if (client->mNextClient->mClient != NULL) {
                 client->mNextClient->mClient->notify(
                         MEDIA_INFO, MEDIA_INFO_STARTED_AS_NEXT, 0, obj);
-            } else if (client->mClient != NULL) {
-                client->mClient->notify(MEDIA_ERROR, MEDIA_ERROR_UNKNOWN , 0, obj);
-                ALOGE("gapless:start playback for next track failed");
             }
         }
     }
